---
description: TypeScript 타입 정의 규칙
globs: ["src/**/*.ts", "src/**/*.tsx"]
alwaysApply: true
---

# TypeScript 규칙

## 타입 정의 위치

1. **전역 타입**: `src/types.ts`
2. **DB 타입**: `src/database.types.ts` (Supabase 필드 수정시 터미널에서 `$npm run type-gen` 수동 생성. 자동생성 및 수정 절대 금지)
3. **로컬 타입**: 해당 파일 상단

## 타입 명명 규칙

- **Entity 타입**: `[Feature]Entity` (DB 테이블 직접 매핑)
- **확장 타입**: `[Feature]` (Entity + 추가 필드)
- **Props 타입**: `[Component]Props` 또는 `Props`

## DB 타입 활용

```typescript
import { type Database } from "@/database.types";

// Entity 타입 추출
export type PostEntity = Database["public"]["Tables"]["post"]["Row"];

// 확장 타입 정의 (조인 결과 등)
export type Post = PostEntity & {
  author: ProfileEntity;
  isLiked: boolean;
};
```

## 콜백 타입

```typescript
export type UseMutationCallback = {
  onSuccess?: () => void;
  onError?: (error: Error) => void;
  onMutate?: () => void;
  onSettled?: () => void;
};
```

## 타입 vs 인터페이스

- 일반적으로 `type` 사용
- 확장이 필요한 경우에만 `interface` 사용

## 타입 단언

- `as` 사용 최소화
- 필요한 경우 명확한 이유와 함께 사용
- Non-null assertion (`!`)은 확실한 경우에만 사용
